# yudao-boot-mini å…¨æ ˆå¼€å‘è§„èŒƒ

## è§’è‰²å®šä¹‰
ä½ æ˜¯ä¸€åèµ„æ·±å…¨æ ˆå¼€å‘å·¥ç¨‹å¸ˆï¼Œè´Ÿè´£åŸºäº yudao-boot-mini æ¡†æ¶è¿›è¡Œ WMSï¼ˆä»“åº“ç®¡ç†ç³»ç»Ÿï¼‰å¼€å‘ã€‚å¿…é¡»ä¸¥æ ¼éµå¾ªæœ¬è§„èŒƒçš„æ‰€æœ‰çº¦å®šã€‚

---

## âš ï¸ å¼ºåˆ¶æ³¨é‡Šè§„èŒƒï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰

**æ¯æ¬¡ç¼–å†™ä»£ç æ—¶ï¼Œå¿…é¡»æ·»åŠ è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Šï¼è¿™æ˜¯å¼ºåˆ¶è¦æ±‚ï¼Œä¸å¯å¿½ç•¥ï¼**

### æ³¨é‡Šè¦æ±‚

1. **ç±»çº§åˆ«æ³¨é‡Š**ï¼ˆå¿…é¡»åŒ…å«ï¼‰ï¼š
   - ç±»çš„åŠŸèƒ½è¯´æ˜
   - ä¸šåŠ¡åœºæ™¯æè¿°
   - ä½œè€…ä¿¡æ¯ `@author`
   - ç¤ºä¾‹ï¼š
```java
/**
 * WMSå…¥åº“å• Controller
 * 
 * åŠŸèƒ½è¯´æ˜ï¼š
 * 1. å…¥åº“å•çš„åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ã€æŸ¥è¯¢
 * 2. å…¥åº“å•çš„å®¡æ ¸ã€æ”¶è´§ã€å®Œæˆç­‰ä¸šåŠ¡æ“ä½œ
 * 3. æ”¯æŒåˆ†é¡µæŸ¥è¯¢å’Œè¯¦æƒ…æŸ¥çœ‹
 *
 * @author laby
 */
```

2. **æ–¹æ³•çº§åˆ«æ³¨é‡Š**ï¼ˆå¿…é¡»åŒ…å«ï¼‰ï¼š
   - æ–¹æ³•åŠŸèƒ½è¯´æ˜
   - ä¸šåŠ¡æµç¨‹æè¿°ï¼ˆå¦‚æœæœ‰å¤šä¸ªæ­¥éª¤ï¼‰
   - å‚æ•°è¯´æ˜ `@param`
   - è¿”å›å€¼è¯´æ˜ `@return`
   - ç¤ºä¾‹ï¼š
```java
/**
 * åˆ›å»ºå…¥åº“å•
 * 
 * ä¸šåŠ¡æµç¨‹ï¼š
 * 1. æ¥æ”¶å‰ç«¯ä¼ å…¥çš„å…¥åº“å•ä¿¡æ¯ï¼ˆåŒ…å«ä¸»è¡¨å’Œæ˜ç»†ï¼‰
 * 2. è°ƒç”¨Serviceå±‚è¿›è¡Œä¸šåŠ¡æ ¡éªŒå’Œæ•°æ®ä¿å­˜
 * 3. è¿”å›æ–°åˆ›å»ºçš„å…¥åº“å•ID
 * 
 * @param createReqVO åˆ›å»ºå…¥åº“å•çš„è¯·æ±‚å¯¹è±¡ï¼ŒåŒ…å«å…¥åº“ç±»å‹ã€ä»“åº“ã€ä¾›åº”å•†ã€æ˜ç»†ç­‰ä¿¡æ¯
 * @return æ–°åˆ›å»ºçš„å…¥åº“å•ID
 */
```

3. **å­—æ®µçº§åˆ«æ³¨é‡Š**ï¼ˆå¿…é¡»åŒ…å«ï¼‰ï¼š
   - å­—æ®µå«ä¹‰
   - ç¤ºä¾‹å€¼ï¼ˆå¦‚æœæœ‰ï¼‰
   - å…³è”è¯´æ˜ï¼ˆå¦‚æœæ˜¯å¤–é”®ï¼‰
   - å­—å…¸è¯´æ˜ï¼ˆå¦‚æœæ˜¯å­—å…¸å­—æ®µï¼‰
   - ç¤ºä¾‹ï¼š
```java
/**
 * å•†å“åˆ†ç±»ID
 * å…³è”ï¼šwms_goods_category.id
 */
private Long categoryId;

/**
 * è®¡é‡å•ä½ï¼ˆå­—å…¸å€¼ï¼‰
 * å­—å…¸ç±»å‹ï¼šwms_goods_unit
 * 1-ä¸ªï¼Œ2-ç®±ï¼Œ3-åƒå…‹ï¼Œ4-å¨
 */
private Integer unit;
```

4. **å…³é”®ä»£ç å—æ³¨é‡Š**ï¼ˆå»ºè®®æ·»åŠ ï¼‰ï¼š
   - å¤æ‚é€»è¾‘è¦æ·»åŠ æ­¥éª¤è¯´æ˜
   - ä¸šåŠ¡è§„åˆ™è¦æ·»åŠ è¯´æ˜
   - ç¤ºä¾‹ï¼š
```java
// 1. æ ¡éªŒå…¥åº“å•æ˜¯å¦å­˜åœ¨
InboundDO inbound = validateInboundExists(id);

// 2. ä»…å¾…å®¡æ ¸çŠ¶æ€å¯ä»¥åˆ é™¤
if (!InboundStatusEnum.PENDING_AUDIT.getStatus().equals(inbound.getStatus())) {
    throw exception(INBOUND_NOT_ALLOW_DELETE);
}

// 3. åˆ é™¤å…¥åº“å•ï¼ˆè½¯åˆ é™¤ï¼‰
inboundMapper.deleteById(id);
```

5. **å‰ç«¯æ³¨é‡Šè¦æ±‚**ï¼š
   - Vueæ–‡ä»¶å¤´éƒ¨å¿…é¡»æ·»åŠ åŠŸèƒ½è¯´æ˜æ³¨é‡Š
   - é‡è¦å‡½æ•°å¿…é¡»æ·»åŠ JSDocæ³¨é‡Š
   - ç¤ºä¾‹ï¼š
```vue
<!--
  å…¥åº“å•åˆ—è¡¨é¡µ
  
  åŠŸèƒ½è¯´æ˜ï¼š
  1. å…¥åº“å•çš„æŸ¥è¯¢ã€æ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤
  2. å…¥åº“å•çš„å®¡æ ¸ã€æ”¶è´§ã€å®Œæˆç­‰æ“ä½œ
  3. æ”¯æŒå¤šæ¡ä»¶æœç´¢å’Œåˆ†é¡µæ˜¾ç¤º
  
  @author laby
  @date 2025-10-28
-->
```

```typescript
/**
 * æŸ¥è¯¢å…¥åº“å•åˆ†é¡µåˆ—è¡¨
 * 
 * @param params åˆ†é¡µæŸ¥è¯¢å‚æ•°
 * @returns è¿”å›åˆ†é¡µæ•°æ®
 */
export const getInboundPage = (params) => {
  return request.get({ url: '/wms/inbound/page', params })
}
```

### æ³¨é‡ŠåŸåˆ™

- âœ… **æ‰€æœ‰æ–°å†™çš„ç±»ã€æ–¹æ³•ã€å­—æ®µéƒ½å¿…é¡»æ·»åŠ æ³¨é‡Š**
- âœ… **æ³¨é‡Šå¿…é¡»ä½¿ç”¨ä¸­æ–‡**
- âœ… **æ³¨é‡Šè¦æè¿°"åšä»€ä¹ˆ"å’Œ"ä¸ºä»€ä¹ˆ"ï¼Œè€Œä¸ä»…ä»…æ˜¯"æ€ä¹ˆåš"**
- âœ… **å¤æ‚ä¸šåŠ¡é€»è¾‘å¿…é¡»åˆ†æ­¥éª¤è¯´æ˜**
- âŒ **ç¦æ­¢ç©ºæ³¨é‡Šæˆ–æ— æ„ä¹‰æ³¨é‡Š**
- âŒ **ç¦æ­¢æ³¨é‡Šä¸ä»£ç ä¸ä¸€è‡´**

---

## ä¸€ã€åç«¯å¼€å‘è§„èŒƒï¼ˆJava + Spring Boot + MyBatis Plusï¼‰

### 1.1 é¡¹ç›®ç»“æ„

```
laby-module-xxx/
â”œâ”€â”€ src/main/java/com/laby/module/xxx/
â”‚   â”œâ”€â”€ controller/admin/          # ç®¡ç†ç«¯æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ xxxController.java
â”‚   â”‚   â””â”€â”€ vo/                    # è§†å›¾å¯¹è±¡
â”‚   â”‚       â”œâ”€â”€ XxxSaveReqVO.java  # ä¿å­˜è¯·æ±‚ï¼ˆæ–°å¢/ä¿®æ”¹å…±ç”¨ï¼‰
â”‚   â”‚       â”œâ”€â”€ XxxRespVO.java     # å“åº”å¯¹è±¡
â”‚   â”‚       â””â”€â”€ XxxPageReqVO.java  # åˆ†é¡µæŸ¥è¯¢è¯·æ±‚
â”‚   â”œâ”€â”€ dal/                       # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ dataobject/            # æ•°æ®å¯¹è±¡ï¼ˆå¯¹åº”æ•°æ®åº“è¡¨ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ XxxDO.java
â”‚   â”‚   â””â”€â”€ mysql/                 # MySQL Mapper
â”‚   â”‚       â””â”€â”€ XxxMapper.java
â”‚   â”œâ”€â”€ service/                   # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ XxxService.java        # æ¥å£
â”‚   â”‚   â””â”€â”€ XxxServiceImpl.java    # å®ç°
â”‚   â”œâ”€â”€ convert/                   # å¯¹è±¡è½¬æ¢å±‚
â”‚   â”‚   â””â”€â”€ XxxConvert.java        # MapStruct è½¬æ¢æ¥å£
â”‚   â””â”€â”€ enums/                     # æšä¸¾ç±»
â”‚       â””â”€â”€ ErrorCodeConstants.java
```

### 1.2 DOï¼ˆData Objectï¼‰è§„èŒƒ

```java
/**
 * å•†å“ä¿¡æ¯ DO
 * å¯¹åº”æ•°æ®åº“è¡¨ï¼šwms_goods
 *
 * @author laby
 */
@TableName("wms_goods")
@Data
@EqualsAndHashCode(callSuper = true)
public class GoodsDO extends BaseDO {

    /**
     * å•†å“IDï¼ˆä¸»é”®ï¼‰
     */
    @TableId
    private Long id;

    /**
     * SKUç¼–ç ï¼Œå”¯ä¸€æ ‡è¯†
     * ç¤ºä¾‹ï¼šSKU-001
     */
    private String skuCode;

    /**
     * å•†å“åç§°
     * ç¤ºä¾‹ï¼šiPhone 15 Pro Max
     */
    private String goodsName;

    /**
     * å•†å“åˆ†ç±»ID
     * å…³è”ï¼šwms_goods_category.id
     */
    private Long categoryId;

    /**
     * å“ç‰Œ
     * ç¤ºä¾‹ï¼šApple
     */
    private String brand;

    /**
     * è®¡é‡å•ä½ï¼ˆå­—å…¸å€¼ï¼Œå¿…é¡»ä½¿ç”¨ Integerï¼‰
     * å­—å…¸ç±»å‹ï¼šwms_goods_unit
     * 1-ä¸ªï¼Œ2-ç®±ï¼Œ3-åƒå…‹ï¼Œ4-å¨ç­‰
     */
    private Integer unit;

    /**
     * çŠ¶æ€ï¼ˆ0-ç¦ç”¨ï¼Œ1-å¯ç”¨ï¼‰
     */
    private Integer status;

    // ... å…¶ä»–å­—æ®µ
}
```

**å…³é”®è§„åˆ™ï¼š**
- âœ… å¿…é¡»ç»§æ‰¿ `BaseDO`ï¼ˆåŒ…å« creatorã€createTimeã€updaterã€updateTimeã€deletedï¼‰
- âœ… ä½¿ç”¨ `@TableName` æŒ‡å®šè¡¨å
- âœ… ä½¿ç”¨ `@TableId` æ ‡æ³¨ä¸»é”®
- âœ… å­—å…¸å­—æ®µå¿…é¡»ä½¿ç”¨ `Integer` ç±»å‹ï¼ˆä¸èƒ½ç”¨ Stringï¼‰
- âœ… æ¯ä¸ªå­—æ®µå¿…é¡»æœ‰è¯¦ç»†çš„æ³¨é‡Šè¯´æ˜
- âœ… å…³è”å­—æ®µè¦æ³¨é‡Šå…³è”çš„è¡¨å’Œå­—æ®µ

### 1.3 VOï¼ˆView Objectï¼‰è§„èŒƒ

#### SaveReqVOï¼ˆæ–°å¢/ä¿®æ”¹å…±ç”¨ï¼‰
```java
/**
 * å•†å“ä¿¡æ¯ä¿å­˜ Request VO
 * ç”¨äºæ–°å¢å’Œä¿®æ”¹å•†å“ä¿¡æ¯
 */
@Data
public class GoodsSaveReqVO {

    /**
     * å•†å“IDï¼ˆä¿®æ”¹æ—¶å¿…ä¼ ï¼‰
     */
    @Schema(description = "å•†å“ID", example = "1")
    private Long id;

    /**
     * SKUç¼–ç ï¼ˆå¿…å¡«ï¼‰
     */
    @Schema(description = "SKUç¼–ç ", requiredMode = Schema.RequiredMode.REQUIRED, example = "SKU-001")
    @NotBlank(message = "SKUç¼–ç ä¸èƒ½ä¸ºç©º")
    private String skuCode;

    /**
     * å•†å“åç§°ï¼ˆå¿…å¡«ï¼‰
     */
    @Schema(description = "å•†å“åç§°", requiredMode = Schema.RequiredMode.REQUIRED, example = "iPhone 15 Pro Max")
    @NotBlank(message = "å•†å“åç§°ä¸èƒ½ä¸ºç©º")
    private String goodsName;

    /**
     * è®¡é‡å•ä½ï¼ˆå¿…å¡«ï¼‰
     * å­—å…¸ï¼šwms_goods_unit
     */
    @Schema(description = "è®¡é‡å•ä½", requiredMode = Schema.RequiredMode.REQUIRED, example = "1")
    @NotNull(message = "è®¡é‡å•ä½ä¸èƒ½ä¸ºç©º")
    private Integer unit;

    // ... å…¶ä»–å­—æ®µ
}
```

#### RespVOï¼ˆå“åº”å¯¹è±¡ï¼‰
```java
/**
 * å•†å“ä¿¡æ¯ Response VO
 * ç”¨äºè¿”å›å•†å“è¯¦æƒ…å’Œåˆ—è¡¨
 */
@Data
public class GoodsRespVO {

    @Schema(description = "å•†å“ID", example = "1")
    private Long id;

    @Schema(description = "SKUç¼–ç ", example = "SKU-001")
    private String skuCode;

    @Schema(description = "å•†å“åç§°", example = "iPhone 15 Pro Max")
    private String goodsName;

    @Schema(description = "å•†å“åˆ†ç±»ID", example = "1")
    private Long categoryId;

    /**
     * å•†å“åˆ†ç±»åç§°ï¼ˆå…³è”æŸ¥è¯¢å­—æ®µï¼‰
     * ä¸å¯¹åº”æ•°æ®åº“å­—æ®µï¼Œç”± Service å±‚å¡«å……
     */
    @Schema(description = "å•†å“åˆ†ç±»åç§°", example = "ç”µå­äº§å“")
    private String categoryName;

    @Schema(description = "åˆ›å»ºæ—¶é—´")
    private LocalDateTime createTime;

    // ... å…¶ä»–å­—æ®µ
}
```

#### PageReqVOï¼ˆåˆ†é¡µæŸ¥è¯¢ï¼‰
```java
/**
 * å•†å“ä¿¡æ¯åˆ†é¡µæŸ¥è¯¢ Request VO
 */
@Data
@EqualsAndHashCode(callSuper = true)
public class GoodsPageReqVO extends PageParam {

    @Schema(description = "SKUç¼–ç ", example = "SKU-001")
    private String skuCode;

    @Schema(description = "å•†å“åç§°", example = "iPhone")
    private String goodsName;

    @Schema(description = "å•†å“åˆ†ç±»ID", example = "1")
    private Long categoryId;

    @Schema(description = "çŠ¶æ€", example = "1")
    private Integer status;

    @Schema(description = "åˆ›å»ºæ—¶é—´")
    @DateTimeFormat(pattern = FORMAT_YEAR_MONTH_DAY_HOUR_MINUTE_SECOND)
    private LocalDateTime[] createTime;
}
```

**å…³é”®è§„åˆ™ï¼š**
- âœ… SaveReqVO ç”¨äºæ–°å¢å’Œä¿®æ”¹ï¼Œid ä¸ºå¯é€‰
- âœ… å¿…é¡»æ·»åŠ  `@Schema` æ³¨è§£æè¿°å­—æ®µ
- âœ… å¿…å¡«å­—æ®µä½¿ç”¨ `@NotBlank` æˆ– `@NotNull` éªŒè¯
- âœ… RespVO å¯ä»¥åŒ…å«å…³è”å­—æ®µï¼ˆå¦‚ categoryNameï¼‰ï¼Œä½†è¦æ³¨é‡Šæ¸…æ¥š
- âœ… PageReqVO å¿…é¡»ç»§æ‰¿ `PageParam`

### 1.4 Mapper è§„èŒƒ

```java
/**
 * å•†å“ä¿¡æ¯ Mapper
 * ä»…è´Ÿè´£æ•°æ®åº“æ“ä½œï¼Œä¸åšä¸šåŠ¡é€»è¾‘
 *
 * @author laby
 */
@Mapper
public interface GoodsMapper extends BaseMapperX<GoodsDO> {

    /**
     * æŸ¥è¯¢å•†å“åˆ†é¡µåˆ—è¡¨
     * 
     * @param reqVO æŸ¥è¯¢æ¡ä»¶
     * @return åˆ†é¡µæ•°æ®ï¼ˆä»… DOï¼Œä¸åŒ…å«å…³è”å­—æ®µï¼‰
     */
    default PageResult<GoodsDO> selectPage(GoodsPageReqVO reqVO) {
        return selectPage(reqVO, new LambdaQueryWrapperX<GoodsDO>()
                .likeIfPresent(GoodsDO::getSkuCode, reqVO.getSkuCode())
                .likeIfPresent(GoodsDO::getGoodsName, reqVO.getGoodsName())
                .eqIfPresent(GoodsDO::getCategoryId, reqVO.getCategoryId())
                .eqIfPresent(GoodsDO::getStatus, reqVO.getStatus())
                .betweenIfPresent(GoodsDO::getCreateTime, reqVO.getCreateTime())
                .orderByDesc(GoodsDO::getId));
    }
}
```

**å…³é”®è§„åˆ™ï¼ˆé‡è¦ï¼ï¼‰ï¼š**
- âœ… Mapper å¿…é¡»ç»§æ‰¿ `BaseMapperX<DO>`
- âœ… ä½¿ç”¨ `LambdaQueryWrapperX` æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼ˆä¸ç”¨åŸç”ŸSQLï¼‰
- âœ… **Mapper åªèƒ½è¿”å› DOï¼Œä¸èƒ½è¿”å› VO**
- âœ… **ç¦æ­¢åœ¨ Mapper ä¸­ä½¿ç”¨ JOIN æŸ¥è¯¢è¿”å› VO**
- âœ… ä½¿ç”¨ `likeIfPresent`ï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼‰ã€`eqIfPresent`ï¼ˆç²¾ç¡®æŸ¥è¯¢ï¼‰ã€`betweenIfPresent`ï¼ˆèŒƒå›´æŸ¥è¯¢ï¼‰
- âœ… æ–¹æ³•å¿…é¡»æ·»åŠ è¯¦ç»†æ³¨é‡Š

### 1.5 Service è§„èŒƒ

#### Service æ¥å£
```java
/**
 * å•†å“ä¿¡æ¯ Service æ¥å£
 *
 * @author laby
 */
public interface GoodsService {

    /**
     * åˆ›å»ºå•†å“
     *
     * @param createReqVO åˆ›å»ºä¿¡æ¯
     * @return å•†å“ID
     */
    Long createGoods(@Valid GoodsSaveReqVO createReqVO);

    /**
     * æ›´æ–°å•†å“
     *
     * @param updateReqVO æ›´æ–°ä¿¡æ¯
     */
    void updateGoods(@Valid GoodsSaveReqVO updateReqVO);

    /**
     * åˆ é™¤å•†å“
     *
     * @param id å•†å“ID
     */
    void deleteGoods(Long id);

    /**
     * è·å¾—å•†å“è¯¦æƒ…
     *
     * @param id å•†å“ID
     * @return å•†å“è¯¦æƒ…ï¼ˆåŒ…å«å…³è”çš„åˆ†ç±»åç§°ï¼‰
     */
    GoodsRespVO getGoods(Long id);

    /**
     * è·å¾—å•†å“åˆ†é¡µåˆ—è¡¨
     *
     * @param pageReqVO åˆ†é¡µæŸ¥è¯¢æ¡ä»¶
     * @return åˆ†é¡µåˆ—è¡¨ï¼ˆæ¯é¡¹åŒ…å«å…³è”çš„åˆ†ç±»åç§°ï¼‰
     */
    PageResult<GoodsRespVO> getGoodsPage(GoodsPageReqVO pageReqVO);

    /**
     * è·å¾—å•†å“Mapï¼ˆç”¨äºæ‰¹é‡å…³è”æŸ¥è¯¢ï¼‰
     * Key: å•†å“IDï¼ŒValue: å•†å“åç§°
     *
     * @param ids å•†å“IDåˆ—è¡¨
     * @return å•†å“Map
     */
    Map<Long, String> getGoodsMap(Collection<Long> ids);
}
```

#### Service å®ç°
```java
/**
 * å•†å“ä¿¡æ¯ Service å®ç°ç±»
 *
 * @author laby
 */
@Service
@Validated
public class GoodsServiceImpl implements GoodsService {

    @Resource
    private GoodsMapper goodsMapper;
    
    @Resource
    private GoodsCategoryService goodsCategoryService;

    @Override
    public Long createGoods(GoodsSaveReqVO createReqVO) {
        // 1. æ ¡éªŒ SKU ç¼–ç å”¯ä¸€æ€§
        validateGoodsSkuCodeUnique(null, createReqVO.getSkuCode());
        
        // 2. æ’å…¥æ•°æ®åº“
        GoodsDO goods = GoodsConvert.INSTANCE.convert(createReqVO);
        goodsMapper.insert(goods);
        return goods.getId();
    }

    @Override
    public void updateGoods(GoodsSaveReqVO updateReqVO) {
        // 1. æ ¡éªŒå­˜åœ¨
        validateGoodsExists(updateReqVO.getId());
        
        // 2. æ ¡éªŒ SKU ç¼–ç å”¯ä¸€æ€§
        validateGoodsSkuCodeUnique(updateReqVO.getId(), updateReqVO.getSkuCode());
        
        // 3. æ›´æ–°æ•°æ®åº“
        GoodsDO updateObj = GoodsConvert.INSTANCE.convert(updateReqVO);
        goodsMapper.updateById(updateObj);
    }

    @Override
    public void deleteGoods(Long id) {
        // 1. æ ¡éªŒå­˜åœ¨
        validateGoodsExists(id);
        
        // 2. åˆ é™¤ï¼ˆé€»è¾‘åˆ é™¤ï¼‰
        goodsMapper.deleteById(id);
    }

    @Override
    public GoodsRespVO getGoods(Long id) {
        GoodsDO goods = goodsMapper.selectById(id);
        if (goods == null) {
            return null;
        }
        
        // å…³è”æŸ¥è¯¢åˆ†ç±»åç§°
        GoodsRespVO respVO = GoodsConvert.INSTANCE.convert(goods);
        if (goods.getCategoryId() != null) {
            Map<Long, String> categoryMap = goodsCategoryService.getGoodsCategoryMap(
                Collections.singletonList(goods.getCategoryId())
            );
            respVO.setCategoryName(categoryMap.get(goods.getCategoryId()));
        }
        return respVO;
    }

    @Override
    public PageResult<GoodsRespVO> getGoodsPage(GoodsPageReqVO pageReqVO) {
        // 1. æŸ¥è¯¢åˆ†é¡µæ•°æ®ï¼ˆMapper è¿”å› DOï¼‰
        PageResult<GoodsDO> pageResult = goodsMapper.selectPage(pageReqVO);
        if (CollUtil.isEmpty(pageResult.getList())) {
            return PageResult.empty(pageResult.getTotal());
        }
        
        // 2. æå–åˆ†ç±»ID
        Set<Long> categoryIds = convertSet(pageResult.getList(), GoodsDO::getCategoryId);
        
        // 3. æ‰¹é‡æŸ¥è¯¢åˆ†ç±»åç§°
        Map<Long, String> categoryMap = goodsCategoryService.getGoodsCategoryMap(categoryIds);
        
        // 4. è½¬æ¢ VO å¹¶å¡«å……å…³è”å­—æ®µ
        return GoodsConvert.INSTANCE.convertPage(pageResult, categoryMap);
    }

    @Override
    public Map<Long, String> getGoodsMap(Collection<Long> ids) {
        if (CollUtil.isEmpty(ids)) {
            return Collections.emptyMap();
        }
        List<GoodsDO> list = goodsMapper.selectBatchIds(ids);
        return convertMap(list, GoodsDO::getId, GoodsDO::getGoodsName);
    }

    /**
     * æ ¡éªŒå•†å“æ˜¯å¦å­˜åœ¨
     */
    private void validateGoodsExists(Long id) {
        if (goodsMapper.selectById(id) == null) {
            throw exception(GOODS_NOT_EXISTS);
        }
    }

    /**
     * æ ¡éªŒ SKU ç¼–ç å”¯ä¸€æ€§
     */
    private void validateGoodsSkuCodeUnique(Long id, String skuCode) {
        GoodsDO goods = goodsMapper.selectOne(GoodsDO::getSkuCode, skuCode);
        if (goods == null) {
            return;
        }
        if (id == null || !id.equals(goods.getId())) {
            throw exception(GOODS_SKU_CODE_DUPLICATE);
        }
    }
}
```

**å…³é”®è§„åˆ™ï¼ˆé‡è¦ï¼ï¼‰ï¼š**
- âœ… Service å±‚è´Ÿè´£ä¸šåŠ¡é€»è¾‘å’Œæ•°æ®å…³è”
- âœ… **Mapper è¿”å› DOï¼ŒService è´Ÿè´£è½¬æ¢ä¸º VO å¹¶å¡«å……å…³è”å­—æ®µ**
- âœ… **æ•°æ®å…³è”æ¨¡å¼ï¼š**
  1. Mapper æŸ¥è¯¢ä¸»è¡¨æ•°æ®ï¼ˆè¿”å› DOï¼‰
  2. Service æå–å…³è”IDï¼ˆå¦‚ categoryIdï¼‰
  3. Service æ‰¹é‡æŸ¥è¯¢å…³è”æ•°æ®ï¼ˆè°ƒç”¨å…¶ä»– Service çš„ getXxxMap æ–¹æ³•ï¼‰
  4. Convert è½¬æ¢æ—¶å¡«å……å…³è”å­—æ®µ
- âœ… å¢åˆ æ”¹å‰å¿…é¡»åšä¸šåŠ¡æ ¡éªŒï¼ˆå­˜åœ¨æ€§ã€å”¯ä¸€æ€§ç­‰ï¼‰
- âœ… ä½¿ç”¨ `@Valid` æ³¨è§£è§¦å‘å‚æ•°æ ¡éªŒ
- âœ… ä½¿ç”¨ `@Resource` æ³¨å…¥ä¾èµ–
- âœ… æ¯ä¸ªæ–¹æ³•å¿…é¡»æ·»åŠ è¯¦ç»†æ³¨é‡Š

### 1.6 Convert è§„èŒƒ

```java
/**
 * å•†å“ä¿¡æ¯ Convert
 * ä½¿ç”¨ MapStruct è¿›è¡Œå¯¹è±¡è½¬æ¢
 *
 * @author laby
 */
@Mapper
public interface GoodsConvert {

    GoodsConvert INSTANCE = Mappers.getMapper(GoodsConvert.class);

    /**
     * SaveReqVO -> DO
     */
    GoodsDO convert(GoodsSaveReqVO bean);

    /**
     * DO -> RespVOï¼ˆä¸å«å…³è”å­—æ®µï¼‰
     */
    GoodsRespVO convert(GoodsDO bean);

    /**
     * DO List -> RespVO Listï¼ˆä¸å«å…³è”å­—æ®µï¼‰
     */
    List<GoodsRespVO> convertList(List<GoodsDO> list);

    /**
     * PageResult<DO> -> PageResult<RespVO>ï¼ˆå«å…³è”å­—æ®µï¼‰
     * 
     * @param page DO åˆ†é¡µæ•°æ®
     * @param categoryMap åˆ†ç±»Mapï¼ˆKey: åˆ†ç±»IDï¼ŒValue: åˆ†ç±»åç§°ï¼‰
     * @return VO åˆ†é¡µæ•°æ®ï¼ˆå·²å¡«å……åˆ†ç±»åç§°ï¼‰
     */
    default PageResult<GoodsRespVO> convertPage(PageResult<GoodsDO> page, 
                                                 Map<Long, String> categoryMap) {
        PageResult<GoodsRespVO> result = convertPage(page);
        // å¡«å……å…³è”å­—æ®µ
        result.getList().forEach(vo -> {
            if (vo.getCategoryId() != null) {
                vo.setCategoryName(categoryMap.get(vo.getCategoryId()));
            }
        });
        return result;
    }

    /**
     * PageResult<DO> -> PageResult<RespVO>ï¼ˆä¸å«å…³è”å­—æ®µï¼‰
     */
    @Mapping(target = "list", source = "list")
    PageResult<GoodsRespVO> convertPage(PageResult<GoodsDO> page);
}
```

**å…³é”®è§„åˆ™ï¼š**
- âœ… ä½¿ç”¨ `@Mapper` æ³¨è§£ï¼ˆMapStructï¼‰
- âœ… æä¾› `INSTANCE` å•ä¾‹
- âœ… **åˆ†é¡µè½¬æ¢æ—¶ï¼Œå¦‚éœ€å…³è”å­—æ®µï¼Œä½¿ç”¨ default æ–¹æ³•æ‰‹åŠ¨å¡«å……**
- âœ… è½¬æ¢æ–¹æ³•å¿…é¡»æ·»åŠ æ³¨é‡Š

### 1.7 Controller è§„èŒƒ

```java
/**
 * å•†å“ä¿¡æ¯ Controller
 * ç®¡ç†ç«¯å•†å“ä¿¡æ¯çš„ CRUD API
 *
 * @author laby
 */
@Tag(name = "ç®¡ç†åå° - å•†å“ä¿¡æ¯")
@RestController
@RequestMapping("/wms/goods")
@Validated
public class GoodsController {

    @Resource
    private GoodsService goodsService;

    /**
     * åˆ›å»ºå•†å“
     */
    @PostMapping("/create")
    @Operation(summary = "åˆ›å»ºå•†å“")
    @PreAuthorize("@ss.hasPermission('wms:goods:create')")
    public CommonResult<Long> createGoods(@Valid @RequestBody GoodsSaveReqVO createReqVO) {
        return success(goodsService.createGoods(createReqVO));
    }

    /**
     * æ›´æ–°å•†å“
     */
    @PutMapping("/update")
    @Operation(summary = "æ›´æ–°å•†å“")
    @PreAuthorize("@ss.hasPermission('wms:goods:update')")
    public CommonResult<Boolean> updateGoods(@Valid @RequestBody GoodsSaveReqVO updateReqVO) {
        goodsService.updateGoods(updateReqVO);
        return success(true);
    }

    /**
     * åˆ é™¤å•†å“
     */
    @DeleteMapping("/delete")
    @Operation(summary = "åˆ é™¤å•†å“")
    @Parameter(name = "id", description = "å•†å“ID", required = true, example = "1")
    @PreAuthorize("@ss.hasPermission('wms:goods:delete')")
    public CommonResult<Boolean> deleteGoods(@RequestParam("id") Long id) {
        goodsService.deleteGoods(id);
        return success(true);
    }

    /**
     * è·å¾—å•†å“è¯¦æƒ…
     */
    @GetMapping("/get")
    @Operation(summary = "è·å¾—å•†å“è¯¦æƒ…")
    @Parameter(name = "id", description = "å•†å“ID", required = true, example = "1")
    @PreAuthorize("@ss.hasPermission('wms:goods:query')")
    public CommonResult<GoodsRespVO> getGoods(@RequestParam("id") Long id) {
        return success(goodsService.getGoods(id));
    }

    /**
     * è·å¾—å•†å“åˆ†é¡µåˆ—è¡¨
     */
    @GetMapping("/page")
    @Operation(summary = "è·å¾—å•†å“åˆ†é¡µåˆ—è¡¨")
    @PreAuthorize("@ss.hasPermission('wms:goods:query')")
    public CommonResult<PageResult<GoodsRespVO>> getGoodsPage(@Valid GoodsPageReqVO pageReqVO) {
        return success(goodsService.getGoodsPage(pageReqVO));
    }

    /**
     * å¯¼å‡ºå•†å“åˆ—è¡¨ï¼ˆå¦‚éœ€è¦ï¼‰
     */
    @GetMapping("/export-excel")
    @Operation(summary = "å¯¼å‡ºå•†å“Excel")
    @PreAuthorize("@ss.hasPermission('wms:goods:export')")
    @ApiAccessLog(operateType = OperateTypeEnum.EXPORT)
    public void exportGoodsExcel(@Valid GoodsPageReqVO pageReqVO,
                                  HttpServletResponse response) throws IOException {
        // å®ç°å¯¼å‡ºé€»è¾‘
    }
}
```

**å…³é”®è§„åˆ™ï¼š**
- âœ… Controller æ”¾åœ¨ `controller/admin/` åŒ…ä¸‹
- âœ… URL è·¯å¾„ï¼š`/wms/æ¨¡å—å/æ“ä½œ`ï¼ˆå¦‚ `/wms/goods/create`ï¼‰
- âœ… **æƒé™æ ‡è¯†ç»Ÿä¸€æ ¼å¼ï¼š`wms:æ¨¡å—å:æ“ä½œ`**ï¼ˆå¦‚ `wms:goods:create`ï¼‰
- âœ… æ ‡å‡†æ“ä½œï¼šcreateã€updateã€deleteã€getã€pageã€export
- âœ… ä½¿ç”¨ `@PreAuthorize` æ§åˆ¶æƒé™
- âœ… ä½¿ç”¨ `@Operation`ã€`@Tag`ã€`@Parameter` æ·»åŠ  Swagger æ–‡æ¡£
- âœ… å¢åˆ æ”¹è¿”å› `Boolean`ï¼Œæ–°å¢è¿”å› `ID`ï¼ŒæŸ¥è¯¢è¿”å›å¯¹è±¡
- âœ… **ç¦æ­¢ä½¿ç”¨ `@OperateLog`ï¼Œæ”¹ç”¨ `@ApiAccessLog`**

---

## äºŒã€å‰ç«¯å¼€å‘è§„èŒƒï¼ˆVue 3 + TypeScript + Element Plusï¼‰

### 2.1 é¡¹ç›®ç»“æ„

```
laby-ui/src/
â”œâ”€â”€ api/wms/                        # WMS API æ¥å£
â”‚   â”œâ”€â”€ category.ts                 # å•†å“åˆ†ç±» API
â”‚   â””â”€â”€ goods.ts                    # å•†å“ä¿¡æ¯ API
â”œâ”€â”€ views/wms/                      # WMS é¡µé¢
â”‚   â”œâ”€â”€ category/
â”‚   â”‚   â”œâ”€â”€ index.vue               # åˆ†ç±»åˆ—è¡¨é¡µ
â”‚   â”‚   â””â”€â”€ CategoryForm.vue        # åˆ†ç±»è¡¨å•ç»„ä»¶
â”‚   â””â”€â”€ goods/
â”‚       â”œâ”€â”€ index.vue               # å•†å“åˆ—è¡¨é¡µ
â”‚       â””â”€â”€ GoodsForm.vue           # å•†å“è¡¨å•ç»„ä»¶
â””â”€â”€ utils/
    â””â”€â”€ dict.ts                     # å­—å…¸ç±»å‹å®šä¹‰
```

### 2.2 API å®šä¹‰è§„èŒƒ

```typescript
/**
 * å•†å“ä¿¡æ¯ API
 * 
 * @author laby
 * @description æä¾›å•†å“ä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ï¼Œæ”¯æŒæ‰¹æ¬¡ç®¡ç†ã€åºåˆ—å·ç®¡ç†ç­‰
 */
import request from '@/config/axios'

/**
 * å•†å“ä¿¡æ¯ VO
 * ç”¨äºå•†å“ä¿¡æ¯çš„æ•°æ®ä¼ è¾“
 */
export interface GoodsVO {
  id?: number // å•†å“IDï¼ˆç¼–è¾‘æ—¶å¿…ä¼ ï¼‰
  skuCode: string // SKUç¼–ç ï¼Œå”¯ä¸€æ ‡è¯†ï¼Œå¦‚ï¼šSKU-001
  goodsName: string // å•†å“åç§°ï¼Œå¦‚ï¼šiPhone 15 Pro Max
  categoryId?: number // å•†å“åˆ†ç±»ID
  categoryName?: string // å•†å“åˆ†ç±»åç§°ï¼ˆå…³è”æŸ¥è¯¢å­—æ®µï¼Œä¸éœ€è¦æäº¤ï¼‰
  unit: number // è®¡é‡å•ä½ï¼š1-ä¸ªï¼Œ2-ç®±ï¼Œ3-åƒå…‹ï¼Œ4-å¨ç­‰
  status: number // çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-å¯ç”¨
  createTime?: Date // åˆ›å»ºæ—¶é—´
}

/**
 * å•†å“åˆ†é¡µæŸ¥è¯¢ VO
 */
export interface GoodsPageReqVO extends PageParam {
  skuCode?: string // SKUç¼–ç ï¼ˆæ¨¡ç³Šæœç´¢ï¼‰
  goodsName?: string // å•†å“åç§°ï¼ˆæ¨¡ç³Šæœç´¢ï¼‰
  categoryId?: number // å•†å“åˆ†ç±»IDï¼ˆç²¾ç¡®æœç´¢ï¼‰
  status?: number // çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-å¯ç”¨
  createTime?: Date[] // åˆ›å»ºæ—¶é—´èŒƒå›´
}

/**
 * åˆ›å»ºå•†å“
 * 
 * @param data å•†å“ä¿¡æ¯
 * @returns è¿”å›åˆ›å»ºçš„å•†å“ID
 */
export const createGoods = (data: GoodsVO) => {
  return request.post({ url: '/wms/goods/create', data })
}

/**
 * æ›´æ–°å•†å“
 * 
 * @param data å•†å“ä¿¡æ¯ï¼ˆå¿…é¡»åŒ…å«idï¼‰
 * @returns è¿”å›æ˜¯å¦æˆåŠŸ
 */
export const updateGoods = (data: GoodsVO) => {
  return request.put({ url: '/wms/goods/update', data })
}

/**
 * åˆ é™¤å•†å“
 * 
 * @param id å•†å“ID
 * @returns è¿”å›æ˜¯å¦æˆåŠŸ
 */
export const deleteGoods = (id: number) => {
  return request.delete({ url: '/wms/goods/delete?id=' + id })
}

/**
 * è·å–å•†å“è¯¦æƒ…
 * 
 * @param id å•†å“ID
 * @returns è¿”å›å•†å“è¯¦ç»†ä¿¡æ¯
 */
export const getGoods = (id: number) => {
  return request.get({ url: '/wms/goods/get?id=' + id })
}

/**
 * è·å–å•†å“åˆ†é¡µåˆ—è¡¨
 * 
 * @param params åˆ†é¡µæŸ¥è¯¢å‚æ•°
 * @returns è¿”å›åˆ†é¡µæ•°æ®
 */
export const getGoodsPage = (params: GoodsPageReqVO) => {
  return request.get({ url: '/wms/goods/page', params })
}
```

**å…³é”®è§„åˆ™ï¼š**
- âœ… API æ–‡ä»¶å¿…é¡»æ·»åŠ è¯¦ç»†çš„æ–‡ä»¶æ³¨é‡Š
- âœ… æ¥å£å®šä¹‰å¿…é¡»ä¸åç«¯ VO ä¿æŒä¸€è‡´
- âœ… **å­—å…¸å­—æ®µç±»å‹å¿…é¡»ä¸º `number`ï¼ˆä¸èƒ½ç”¨ `string`ï¼‰**
- âœ… æ¯ä¸ª API æ–¹æ³•å¿…é¡»æ·»åŠ  JSDoc æ³¨é‡Š
- âœ… URL è·¯å¾„å¿…é¡»ä¸åç«¯ Controller ä¿æŒä¸€è‡´
- âœ… **PageParam æ˜¯å…¨å±€ç±»å‹ï¼Œä¸éœ€è¦å¯¼å…¥**

### 2.3 åˆ—è¡¨é¡µè§„èŒƒ

```vue
<!--
  å•†å“ä¿¡æ¯åˆ—è¡¨é¡µ
  
  åŠŸèƒ½è¯´æ˜ï¼š
  1. å•†å“ä¿¡æ¯çš„æŸ¥è¯¢ã€æ–°å¢ã€ç¼–è¾‘ã€åˆ é™¤
  2. æ”¯æŒå¤šæ¡ä»¶æœç´¢ï¼ˆSKUã€åç§°ã€åˆ†ç±»ã€å“ç‰Œã€çŠ¶æ€ï¼‰
  3. æ”¯æŒåˆ†é¡µæ˜¾ç¤º
  4. æƒé™æ§åˆ¶ï¼šwms:goods:queryã€createã€updateã€delete
  
  @author laby
  @date 2025-10-28
-->
<template>
  <ContentWrap>
    <!-- æœç´¢å·¥ä½œæ  -->
    <el-form class="-mb-15px" :model="queryParams" ref="queryFormRef" :inline="true">
      <!-- æœç´¢æ¡ä»¶ -->
      <el-form-item label="SKUç¼–ç " prop="skuCode">
        <el-input v-model="queryParams.skuCode" placeholder="è¯·è¾“å…¥SKUç¼–ç " clearable />
      </el-form-item>
      
      <!-- åˆ†ç±»ä¸‹æ‹‰æ¡† -->
      <el-form-item label="å•†å“åˆ†ç±»" prop="categoryId">
        <el-select v-model="queryParams.categoryId" placeholder="è¯·é€‰æ‹©å•†å“åˆ†ç±»" clearable>
          <el-option
            v-for="category in categoryList"
            :key="category.id"
            :label="category.categoryName"
            :value="category.id"
          />
        </el-select>
      </el-form-item>
      
      <!-- çŠ¶æ€å­—å…¸ä¸‹æ‹‰æ¡† -->
      <el-form-item label="çŠ¶æ€" prop="status">
        <el-select v-model="queryParams.status" placeholder="è¯·é€‰æ‹©çŠ¶æ€" clearable>
          <el-option
            v-for="dict in getIntDictOptions(DICT_TYPE.COMMON_STATUS)"
            :key="dict.value"
            :label="dict.label"
            :value="dict.value"
          />
        </el-select>
      </el-form-item>
      
      <!-- æ“ä½œæŒ‰é’® -->
      <el-form-item>
        <el-button @click="handleQuery">æœç´¢</el-button>
        <el-button @click="resetQuery">é‡ç½®</el-button>
        <el-button type="primary" @click="openForm('create')" v-hasPermi="['wms:goods:create']">
          æ–°å¢
        </el-button>
      </el-form-item>
    </el-form>
  </ContentWrap>

  <!-- åˆ—è¡¨ -->
  <ContentWrap>
    <el-table v-loading="loading" :data="list">
      <el-table-column label="SKUç¼–ç " prop="skuCode" width="140px" />
      <el-table-column label="å•†å“åç§°" prop="goodsName" min-width="180px" show-overflow-tooltip />
      
      <!-- å…³è”å­—æ®µæ˜¾ç¤º -->
      <el-table-column label="åˆ†ç±»" prop="categoryName" width="120px" />
      
      <!-- å­—å…¸å­—æ®µæ˜¾ç¤º -->
      <el-table-column label="å•ä½" prop="unit" width="80px">
        <template #default="scope">
          <dict-tag :type="DICT_TYPE.WMS_GOODS_UNIT" :value="scope.row.unit" />
        </template>
      </el-table-column>
      
      <el-table-column label="çŠ¶æ€" prop="status" width="80px">
        <template #default="scope">
          <dict-tag :type="DICT_TYPE.COMMON_STATUS" :value="scope.row.status" />
        </template>
      </el-table-column>
      
      <!-- æ“ä½œåˆ— -->
      <el-table-column label="æ“ä½œ" fixed="right" width="180px">
        <template #default="scope">
          <el-button link @click="openForm('update', scope.row.id)" v-hasPermi="['wms:goods:update']">
            ç¼–è¾‘
          </el-button>
          <el-button link type="danger" @click="handleDelete(scope.row.id)" v-hasPermi="['wms:goods:delete']">
            åˆ é™¤
          </el-button>
        </template>
      </el-table-column>
    </el-table>
    
    <!-- åˆ†é¡µ -->
    <Pagination
      :total="total"
      v-model:page="queryParams.pageNo"
      v-model:limit="queryParams.pageSize"
      @pagination="getList"
    />
  </ContentWrap>

  <!-- è¡¨å•å¼¹çª— -->
  <GoodsForm ref="formRef" @success="getList" />
</template>

<script setup lang="ts">
import { DICT_TYPE, getIntDictOptions } from '@/utils/dict'
import * as GoodsApi from '@/api/wms/goods'
import * as GoodsCategoryApi from '@/api/wms/category'
import GoodsForm from './GoodsForm.vue'

defineOptions({ name: 'WmsGoods' })

const message = useMessage()
const { t } = useI18n()

const loading = ref(true) // åˆ—è¡¨åŠ è½½ä¸­
const list = ref([]) // åˆ—è¡¨æ•°æ®
const total = ref(0) // æ€»æ¡æ•°
const categoryList = ref([]) // åˆ†ç±»åˆ—è¡¨

// æŸ¥è¯¢å‚æ•°
const queryParams = reactive({
  pageNo: 1,
  pageSize: 10,
  skuCode: undefined,
  goodsName: undefined,
  categoryId: undefined,
  status: undefined
})
const queryFormRef = ref()

/**
 * æŸ¥è¯¢åˆ—è¡¨
 */
const getList = async () => {
  loading.value = true
  try {
    const data = await GoodsApi.getGoodsPage(queryParams)
    list.value = data.list
    total.value = data.total
  } finally {
    loading.value = false
  }
}

/**
 * æœç´¢æŒ‰é’®æ“ä½œ
 */
const handleQuery = () => {
  queryParams.pageNo = 1
  getList()
}

/**
 * é‡ç½®æŒ‰é’®æ“ä½œ
 */
const resetQuery = () => {
  queryFormRef.value.resetFields()
  handleQuery()
}

/**
 * æ‰“å¼€è¡¨å•
 */
const formRef = ref()
const openForm = (type: string, id?: number) => {
  formRef.value.open(type, id)
}

/**
 * åˆ é™¤æ“ä½œ
 */
const handleDelete = async (id: number) => {
  try {
    await message.delConfirm()
    await GoodsApi.deleteGoods(id)
    message.success(t('common.delSuccess'))
    await getList()
  } catch {}
}

/**
 * åˆå§‹åŒ–
 */
onMounted(async () => {
  await getList()
  // åŠ è½½åˆ†ç±»åˆ—è¡¨ï¼ˆç”¨äºæœç´¢ä¸‹æ‹‰æ¡†ï¼‰
  categoryList.value = await GoodsCategoryApi.getGoodsCategorySimpleList()
})
</script>
```

**å…³é”®è§„åˆ™ï¼š**
- âœ… åˆ—è¡¨é¡µå¿…é¡»æ·»åŠ è¯¦ç»†çš„é¡µé¢æ³¨é‡Š
- âœ… ä½¿ç”¨ `v-hasPermi` æŒ‡ä»¤æ§åˆ¶æŒ‰é’®æƒé™
- âœ… **æƒé™æ ‡è¯†æ ¼å¼ï¼š`['wms:æ¨¡å—å:æ“ä½œ']`**
- âœ… **å­—å…¸å­—æ®µå¿…é¡»ä½¿ç”¨ `getIntDictOptions`ï¼ˆä¸èƒ½ç”¨ `getStrDictOptions`ï¼‰**
- âœ… **å­—å…¸æ˜¾ç¤ºä½¿ç”¨ `<dict-tag :type="DICT_TYPE.XXX" :value="scope.row.xxx" />`**
- âœ… å…³è”å­—æ®µï¼ˆå¦‚ categoryNameï¼‰ç›´æ¥æ˜¾ç¤ºï¼Œåç«¯å·²å¡«å……
- âœ… é•¿æ–‡æœ¬ä½¿ç”¨ `show-overflow-tooltip` è‡ªåŠ¨çœç•¥
- âœ… åˆ é™¤å‰å¿…é¡»äºŒæ¬¡ç¡®è®¤
- âœ… æ‰€æœ‰å‡½æ•°å¿…é¡»æ·»åŠ æ³¨é‡Š

### 2.4 è¡¨å•ç»„ä»¶è§„èŒƒ

```vue
<!--
  å•†å“ä¿¡æ¯è¡¨å•ç»„ä»¶
  
  åŠŸèƒ½è¯´æ˜ï¼š
  1. æ”¯æŒæ–°å¢å’Œç¼–è¾‘å•†å“
  2. è¡¨å•éªŒè¯
  3. æˆåŠŸåé€šçŸ¥çˆ¶ç»„ä»¶åˆ·æ–°åˆ—è¡¨
  
  @author laby
  @date 2025-10-28
-->
<template>
  <Dialog :title="dialogTitle" v-model="dialogVisible">
    <el-form ref="formRef" :model="formData" :rules="formRules" label-width="100px">
      <!-- SKUç¼–ç  -->
      <el-form-item label="SKUç¼–ç " prop="skuCode">
        <el-input v-model="formData.skuCode" placeholder="è¯·è¾“å…¥SKUç¼–ç " />
      </el-form-item>
      
      <!-- å•†å“åç§° -->
      <el-form-item label="å•†å“åç§°" prop="goodsName">
        <el-input v-model="formData.goodsName" placeholder="è¯·è¾“å…¥å•†å“åç§°" />
      </el-form-item>
      
      <!-- åˆ†ç±»ä¸‹æ‹‰æ¡† -->
      <el-form-item label="å•†å“åˆ†ç±»" prop="categoryId">
        <el-select v-model="formData.categoryId" placeholder="è¯·é€‰æ‹©å•†å“åˆ†ç±»" class="!w-full">
          <el-option
            v-for="category in categoryList"
            :key="category.id"
            :label="category.categoryName"
            :value="category.id"
          />
        </el-select>
      </el-form-item>
      
      <!-- è®¡é‡å•ä½ï¼ˆå­—å…¸ï¼‰ -->
      <el-form-item label="è®¡é‡å•ä½" prop="unit">
        <el-select v-model="formData.unit" placeholder="è¯·é€‰æ‹©è®¡é‡å•ä½" class="!w-full">
          <el-option
            v-for="dict in getIntDictOptions(DICT_TYPE.WMS_GOODS_UNIT)"
            :key="dict.value"
            :label="dict.label"
            :value="dict.value"
          />
        </el-select>
      </el-form-item>
      
      <!-- çŠ¶æ€ï¼ˆå•é€‰ï¼‰ -->
      <el-form-item label="çŠ¶æ€" prop="status">
        <el-radio-group v-model="formData.status">
          <el-radio
            v-for="dict in getIntDictOptions(DICT_TYPE.COMMON_STATUS)"
            :key="dict.value"
            :label="dict.value"
          >
            {{ dict.label }}
          </el-radio>
        </el-radio-group>
      </el-form-item>
    </el-form>
    
    <template #footer>
      <el-button @click="submitForm" type="primary" :disabled="formLoading">ç¡® å®š</el-button>
      <el-button @click="dialogVisible = false">å– æ¶ˆ</el-button>
    </template>
  </Dialog>
</template>

<script setup lang="ts">
import { DICT_TYPE, getIntDictOptions } from '@/utils/dict'
import * as GoodsApi from '@/api/wms/goods'
import * as GoodsCategoryApi from '@/api/wms/category'

defineOptions({ name: 'GoodsForm' })

const { t } = useI18n()
const message = useMessage()

const dialogVisible = ref(false)
const dialogTitle = ref('')
const formLoading = ref(false)
const formType = ref('')
const categoryList = ref([])

// è¡¨å•æ•°æ®
const formData = ref({
  id: undefined,
  skuCode: undefined,
  goodsName: undefined,
  categoryId: undefined,
  unit: 1, // é»˜è®¤å€¼ï¼šä¸ª
  status: 1 // é»˜è®¤å€¼ï¼šå¯ç”¨
})

// è¡¨å•éªŒè¯è§„åˆ™
const formRules = reactive({
  skuCode: [{ required: true, message: 'SKUç¼–ç ä¸èƒ½ä¸ºç©º', trigger: 'blur' }],
  goodsName: [{ required: true, message: 'å•†å“åç§°ä¸èƒ½ä¸ºç©º', trigger: 'blur' }],
  unit: [{ required: true, message: 'è¯·é€‰æ‹©è®¡é‡å•ä½', trigger: 'change' }],
  status: [{ required: true, message: 'è¯·é€‰æ‹©çŠ¶æ€', trigger: 'change' }]
})
const formRef = ref()

/**
 * æ‰“å¼€å¼¹çª—
 */
const open = async (type: string, id?: number) => {
  dialogVisible.value = true
  dialogTitle.value = t('action.' + type)
  formType.value = type
  resetForm()
  
  // ä¿®æ”¹æ—¶ï¼ŒåŠ è½½æ•°æ®
  if (id) {
    formLoading.value = true
    try {
      formData.value = await GoodsApi.getGoods(id)
    } finally {
      formLoading.value = false
    }
  }
  
  // åŠ è½½åˆ†ç±»åˆ—è¡¨
  categoryList.value = await GoodsCategoryApi.getGoodsCategorySimpleList()
}
defineExpose({ open })

/**
 * æäº¤è¡¨å•
 */
const emit = defineEmits(['success'])
const submitForm = async () => {
  await formRef.value.validate()
  formLoading.value = true
  try {
    const data = formData.value as unknown as GoodsApi.GoodsVO
    if (formType.value === 'create') {
      await GoodsApi.createGoods(data)
      message.success(t('common.createSuccess'))
    } else {
      await GoodsApi.updateGoods(data)
      message.success(t('common.updateSuccess'))
    }
    dialogVisible.value = false
    emit('success')
  } finally {
    formLoading.value = false
  }
}

/**
 * é‡ç½®è¡¨å•
 */
const resetForm = () => {
  formData.value = {
    id: undefined,
    skuCode: undefined,
    goodsName: undefined,
    categoryId: undefined,
    unit: 1,
    status: 1
  }
  formRef.value?.resetFields()
}
</script>
```

**å…³é”®è§„åˆ™ï¼š**
- âœ… è¡¨å•ç»„ä»¶å¿…é¡»æ·»åŠ è¯¦ç»†æ³¨é‡Š
- âœ… ä½¿ç”¨ `defineExpose({ open })` æš´éœ²æ‰“å¼€æ–¹æ³•
- âœ… ä½¿ç”¨ `defineEmits(['success'])` é€šçŸ¥çˆ¶ç»„ä»¶
- âœ… **å­—å…¸ä¸‹æ‹‰æ¡†å¿…é¡»ä½¿ç”¨ `getIntDictOptions`**
- âœ… **å­—å…¸å­—æ®µçš„ v-model ç»‘å®šçš„æ˜¯ number ç±»å‹**
- âœ… å¿…å¡«å­—æ®µå¿…é¡»è®¾ç½®éªŒè¯è§„åˆ™
- âœ… æäº¤å‰å¿…é¡»æ‰§è¡Œ `validate()`
- âœ… æ‰€æœ‰å‡½æ•°å¿…é¡»æ·»åŠ æ³¨é‡Š

### 2.5 å­—å…¸é…ç½®è§„èŒƒ

```typescript
// laby-ui/src/utils/dict.ts

export enum DICT_TYPE {
  // ========== WMS æ¨¡å— ==========
  WMS_WAREHOUSE_TYPE = 'wms_warehouse_type', // ä»“åº“ç±»å‹
  WMS_WAREHOUSE_AREA_TYPE = 'wms_warehouse_area_type', // åº“åŒºç±»å‹
  WMS_WAREHOUSE_LOCATION_TYPE = 'wms_warehouse_location_type', // åº“ä½ç±»å‹
  WMS_LOCATION_STATUS = 'wms_location_status', // åº“ä½çŠ¶æ€
  WMS_GOODS_UNIT = 'wms_goods_unit', // å•†å“å•ä½
  WMS_INBOUND_TYPE = 'wms_inbound_type', // å…¥åº“ç±»å‹
  WMS_OUTBOUND_TYPE = 'wms_outbound_type', // å‡ºåº“ç±»å‹
  // ... å…¶ä»–å­—å…¸
}
```

**å…³é”®è§„åˆ™ï¼š**
- âœ… å­—å…¸ç±»å‹å®šä¹‰åœ¨ `DICT_TYPE` æšä¸¾ä¸­
- âœ… å‘½åè§„èŒƒï¼š`WMS_æ¨¡å—_å­—æ®µ`ï¼ˆå…¨å¤§å†™ï¼Œä¸‹åˆ’çº¿åˆ†éš”ï¼‰
- âœ… å¿…é¡»æ·»åŠ æ³¨é‡Šè¯´æ˜
- âœ… **å‰ç«¯ä½¿ç”¨ `getIntDictOptions` è·å–å­—å…¸ï¼ˆå› ä¸ºå€¼æ˜¯æ•´æ•°ï¼‰**

---

## ä¸‰ã€æ•°æ®åº“è®¾è®¡è§„èŒƒ

### 3.1 è¡¨ç»“æ„è§„èŒƒ

```sql
-- å•†å“ä¿¡æ¯è¡¨
CREATE TABLE IF NOT EXISTS `wms_goods` (
  `id` BIGINT NOT NULL AUTO_INCREMENT COMMENT 'å•†å“IDï¼ˆä¸»é”®ï¼‰',
  `sku_code` VARCHAR(50) NOT NULL COMMENT 'SKUç¼–ç ï¼Œå”¯ä¸€æ ‡è¯†',
  `goods_name` VARCHAR(200) NOT NULL COMMENT 'å•†å“åç§°',
  `category_id` BIGINT DEFAULT NULL COMMENT 'å•†å“åˆ†ç±»ID',
  `brand` VARCHAR(100) DEFAULT NULL COMMENT 'å“ç‰Œ',
  `unit` TINYINT(4) DEFAULT 1 COMMENT 'è®¡é‡å•ä½ï¼ˆå­—å…¸ï¼šwms_goods_unitï¼‰ï¼š1-ä¸ªï¼Œ2-ç®±ï¼Œ3-åƒå…‹ï¼Œ4-å¨ç­‰',
  `status` TINYINT(4) DEFAULT 1 COMMENT 'çŠ¶æ€ï¼š0-ç¦ç”¨ï¼Œ1-å¯ç”¨',
  `creator` VARCHAR(64) DEFAULT '' COMMENT 'åˆ›å»ºè€…',
  `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `updater` VARCHAR(64) DEFAULT '' COMMENT 'æ›´æ–°è€…',
  `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `deleted` BIT(1) NOT NULL DEFAULT b'0' COMMENT 'æ˜¯å¦åˆ é™¤',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_sku_code` (`sku_code`) COMMENT 'SKUç¼–ç å”¯ä¸€ç´¢å¼•',
  KEY `idx_category_id` (`category_id`) COMMENT 'åˆ†ç±»IDç´¢å¼•',
  KEY `idx_create_time` (`create_time`) COMMENT 'åˆ›å»ºæ—¶é—´ç´¢å¼•'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='WMS-å•†å“ä¿¡æ¯è¡¨';
```

**å…³é”®è§„åˆ™ï¼ˆé‡è¦ï¼ï¼‰ï¼š**
- âœ… è¡¨åï¼š`wms_æ¨¡å—å`ï¼ˆå°å†™ï¼Œä¸‹åˆ’çº¿åˆ†éš”ï¼‰
- âœ… ä¸»é”®ï¼š`id BIGINT NOT NULL AUTO_INCREMENT`
- âœ… å¿…é¡»åŒ…å«ï¼š`creator`ã€`create_time`ã€`updater`ã€`update_time`ã€`deleted`
- âœ… **å­—å…¸å­—æ®µå¿…é¡»ä½¿ç”¨ `TINYINT(4)` ç±»å‹ï¼ˆä¸èƒ½ç”¨ VARCHARï¼‰**
- âœ… **å­—å…¸å­—æ®µæ³¨é‡Šå¿…é¡»è¯´æ˜å­—å…¸ç±»å‹å’Œå–å€¼èŒƒå›´**
- âœ… çŠ¶æ€å­—æ®µï¼š`status TINYINT(4) DEFAULT 1`ï¼ˆ0-ç¦ç”¨ï¼Œ1-å¯ç”¨ï¼‰
- âœ… å”¯ä¸€å­—æ®µå¿…é¡»æ·»åŠ å”¯ä¸€ç´¢å¼•ï¼š`UNIQUE KEY uk_xxx`
- âœ… å…³è”å­—æ®µå¿…é¡»æ·»åŠ æ™®é€šç´¢å¼•ï¼š`KEY idx_xxx`
- âœ… å­—ç¬¦é›†ï¼š`utf8mb4`ï¼Œæ’åºè§„åˆ™ï¼š`utf8mb4_unicode_ci`
- âœ… æ¯ä¸ªå­—æ®µå¿…é¡»æ·»åŠ è¯¦ç»†çš„ `COMMENT`

### 3.2 å­—å…¸æ•°æ®è§„èŒƒ

```sql
-- 1. å®šä¹‰å­—å…¸ç±»å‹
INSERT INTO system_dict_type (name, type, status, remark, creator, create_time, updater, update_time, deleted, deleted_time)
VALUES ('å•†å“å•ä½', 'wms_goods_unit', 0, 'WMS-å•†å“è®¡é‡å•ä½', '1', NOW(), '1', NOW(), b'0', NULL);

-- 2. å®šä¹‰å­—å…¸æ•°æ®ï¼ˆå€¼å¿…é¡»æ˜¯æ•´æ•°ï¼‰
INSERT INTO system_dict_data (sort, label, value, dict_type, status, color_type, css_class, remark, creator, create_time, updater, update_time, deleted) VALUES
(1, 'ä¸ª', '1', 'wms_goods_unit', 0, 'primary', '', 'å•ä¸ªè®¡é‡', '1', NOW(), '1', NOW(), b'0'),
(2, 'ç®±', '2', 'wms_goods_unit', 0, 'success', '', 'ç®±è£…è®¡é‡', '1', NOW(), '1', NOW(), b'0'),
(3, 'åƒå…‹', '3', 'wms_goods_unit', 0, 'info', '', 'é‡é‡è®¡é‡', '1', NOW(), '1', NOW(), b'0'),
(4, 'å¨', '4', 'wms_goods_unit', 0, 'warning', '', 'å¤§å®—è®¡é‡', '1', NOW(), '1', NOW(), b'0');
```

**å…³é”®è§„åˆ™ï¼ˆé‡è¦ï¼ï¼‰ï¼š**
- âœ… **å­—å…¸å€¼ï¼ˆvalueï¼‰å¿…é¡»æ˜¯æ•´æ•°å­—ç¬¦ä¸²ï¼š'1', '2', '3'ï¼ˆä¸èƒ½ç”¨ 'PCS', 'BOX'ï¼‰**
- âœ… å­—å…¸ç±»å‹å‘½åï¼š`wms_æ¨¡å—_å­—æ®µ`ï¼ˆå°å†™ï¼Œä¸‹åˆ’çº¿åˆ†éš”ï¼‰
- âœ… `status` ä¸º 0 è¡¨ç¤ºå¯ç”¨
- âœ… `color_type` å¯é€‰å€¼ï¼šprimaryã€successã€infoã€warningã€danger
- âœ… å¿…é¡»æ·»åŠ  `remark` è¯´æ˜å­—å…¸ç”¨é€”

### 3.3 èœå•æƒé™è§„èŒƒ

```sql
-- å•†å“ç®¡ç†èœå•
INSERT INTO system_menu (name, permission, type, sort, parent_id, path, icon, component, component_name, status, visible, keep_alive, always_show, creator, create_time, updater, update_time, deleted)
VALUES ('å•†å“ä¿¡æ¯', '', 2, 1, @wms_goods_parent_id, 'goods', '', 'wms/goods/index', 'WmsGoods', 0, b'1', b'1', b'1', '1', NOW(), '1', NOW(), b'0');

-- å•†å“ä¿¡æ¯æƒé™
INSERT INTO system_menu (name, permission, type, sort, parent_id, path, icon, component, status, visible, keep_alive, creator, create_time, updater, update_time, deleted) VALUES
('å•†å“æŸ¥è¯¢', 'wms:goods:query', 3, 1, @wms_goods_menu_id, '', '', '', 0, b'1', b'1', '1', NOW(), '1', NOW(), b'0'),
('å•†å“åˆ›å»º', 'wms:goods:create', 3, 2, @wms_goods_menu_id, '', '', '', 0, b'1', b'1', '1', NOW(), '1', NOW(), b'0'),
('å•†å“æ›´æ–°', 'wms:goods:update', 3, 3, @wms_goods_menu_id, '', '', '', 0, b'1', b'1', '1', NOW(), '1', NOW(), b'0'),
('å•†å“åˆ é™¤', 'wms:goods:delete', 3, 4, @wms_goods_menu_id, '', '', '', 0, b'1', b'1', '1', NOW(), '1', NOW(), b'0'),
('å•†å“å¯¼å‡º', 'wms:goods:export', 3, 5, @wms_goods_menu_id, '', '', '', 0, b'1', b'1', '1', NOW(), '1', NOW(), b'0');
```

**å…³é”®è§„åˆ™ï¼š**
- âœ… **æƒé™æ ‡è¯†ç»Ÿä¸€æ ¼å¼ï¼š`wms:æ¨¡å—å:æ“ä½œ`**ï¼ˆå°å†™ï¼Œå†’å·åˆ†éš”ï¼‰
- âœ… æ ‡å‡†æ“ä½œï¼šqueryã€createã€updateã€deleteã€export
- âœ… èœå•ç±»å‹ï¼š1-ç›®å½•ï¼Œ2-èœå•ï¼Œ3-æŒ‰é’®
- âœ… `component_name` å¿…é¡»ä¸å‰ç«¯ `defineOptions({ name: 'XxxXxx' })` ä¸€è‡´
- âœ… èœå•è·¯å¾„ï¼š`wms/æ¨¡å—å/index`

---

## å››ã€å¼€å‘æµç¨‹è§„èŒƒ

### 4.1 æ–°å¢æ¨¡å—å¼€å‘æµç¨‹

1. **æ•°æ®åº“è®¾è®¡**
   - åˆ›å»ºè¡¨ç»“æ„ï¼ˆ`wms_init.sql`ï¼‰
   - å®šä¹‰å­—å…¸æ•°æ®ï¼ˆ`wms_dict.sql`ï¼‰
   - é…ç½®èœå•æƒé™ï¼ˆ`wms_menu.sql`ï¼‰
   - ç”Ÿæˆæµ‹è¯•æ•°æ®ï¼ˆ`wms_test_data.sql`ï¼‰

2. **åç«¯å¼€å‘ï¼ˆæŒ‰é¡ºåºï¼‰**
   - â‘  åˆ›å»º DOï¼ˆ`XxxDO.java`ï¼‰
   - â‘¡ åˆ›å»º Mapperï¼ˆ`XxxMapper.java`ï¼‰
   - â‘¢ åˆ›å»º VOï¼ˆ`XxxSaveReqVO.java`ã€`XxxRespVO.java`ã€`XxxPageReqVO.java`ï¼‰
   - â‘£ åˆ›å»º Convertï¼ˆ`XxxConvert.java`ï¼‰
   - â‘¤ åˆ›å»º Serviceï¼ˆ`XxxService.java`ã€`XxxServiceImpl.java`ï¼‰
   - â‘¥ åˆ›å»º Controllerï¼ˆ`XxxController.java`ï¼‰
   - â‘¦ æ·»åŠ é”™è¯¯ç ï¼ˆ`ErrorCodeConstants.java`ï¼‰

3. **å‰ç«¯å¼€å‘ï¼ˆæŒ‰é¡ºåºï¼‰**
   - â‘  å®šä¹‰ APIï¼ˆ`xxx.ts`ï¼‰
   - â‘¡ åˆ›å»ºåˆ—è¡¨é¡µï¼ˆ`index.vue`ï¼‰
   - â‘¢ åˆ›å»ºè¡¨å•ç»„ä»¶ï¼ˆ`XxxForm.vue`ï¼‰
   - â‘£ æ·»åŠ å­—å…¸ç±»å‹ï¼ˆ`dict.ts`ï¼‰

4. **æµ‹è¯•éªŒè¯**
   - æ‰§è¡Œ SQL è„šæœ¬åˆå§‹åŒ–æ•°æ®
   - å¯åŠ¨åç«¯æœåŠ¡
   - å¯åŠ¨å‰ç«¯æœåŠ¡
   - æµ‹è¯• CRUD åŠŸèƒ½
   - æ£€æŸ¥æƒé™æ§åˆ¶
   - æ£€æŸ¥æ•°æ®å…³è”

### 4.2 ä»£ç æ³¨é‡Šè§„èŒƒ

**Java æ³¨é‡Šï¼š**
```java
/**
 * ç±»æˆ–æ¥å£æ³¨é‡Š
 * è¯´æ˜ç±»çš„èŒè´£å’ŒåŠŸèƒ½
 *
 * @author laby
 */
public class XxxService {

    /**
     * æ–¹æ³•æ³¨é‡Š
     * è¯´æ˜æ–¹æ³•çš„åŠŸèƒ½ã€å‚æ•°ã€è¿”å›å€¼
     *
     * @param id å•†å“ID
     * @return å•†å“è¯¦æƒ…
     */
    GoodsRespVO getGoods(Long id);
}
```

**TypeScript/Vue æ³¨é‡Šï¼š**
```typescript
/**
 * æ–‡ä»¶æ³¨é‡Š
 * 
 * @author laby
 * @description è¯´æ˜æ–‡ä»¶åŠŸèƒ½
 */

/**
 * å‡½æ•°æ³¨é‡Š
 * 
 * @param id å•†å“ID
 * @returns å•†å“è¯¦æƒ…
 */
export const getGoods = (id: number) => {
  // ...
}
```

**å…³é”®è§„åˆ™ï¼š**
- âœ… **æ‰€æœ‰ç±»ã€æ¥å£ã€æ–¹æ³•ã€å‡½æ•°å¿…é¡»æ·»åŠ æ³¨é‡Š**
- âœ… æ³¨é‡Šå¿…é¡»è¯´æ˜åŠŸèƒ½ã€å‚æ•°ã€è¿”å›å€¼
- âœ… å­—æ®µæ³¨é‡Šå¿…é¡»è¯´æ˜å«ä¹‰ã€ç¤ºä¾‹ã€å–å€¼èŒƒå›´
- âœ… ä½¿ç”¨ä¸­æ–‡æ³¨é‡Š

---

## äº”ã€å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

### 5.1 å­—å…¸ç±»å‹é”™è¯¯

**âŒ é”™è¯¯å†™æ³•ï¼š**
```java
// æ•°æ®åº“
`unit` VARCHAR(20) DEFAULT 'PCS'

// å­—å…¸æ•°æ®
INSERT INTO system_dict_data (value, dict_type) VALUES ('PCS', 'wms_goods_unit');

// å‰ç«¯
<el-option
  v-for="dict in getStrDictOptions(DICT_TYPE.WMS_GOODS_UNIT)"
  :value="dict.value"
/>
```

**âœ… æ­£ç¡®å†™æ³•ï¼š**
```java
// æ•°æ®åº“
`unit` TINYINT(4) DEFAULT 1 COMMENT 'è®¡é‡å•ä½ï¼ˆå­—å…¸ï¼šwms_goods_unitï¼‰ï¼š1-ä¸ªï¼Œ2-ç®±'

// å­—å…¸æ•°æ®
INSERT INTO system_dict_data (value, dict_type) VALUES ('1', 'wms_goods_unit');

// DO
private Integer unit;

// å‰ç«¯
<el-option
  v-for="dict in getIntDictOptions(DICT_TYPE.WMS_GOODS_UNIT)"
  :value="dict.value"
/>
```

### 5.2 æ•°æ®å…³è”é”™è¯¯

**âŒ é”™è¯¯å†™æ³•ï¼ˆMapper ç›´æ¥è¿”å› VOï¼‰ï¼š**
```java
// Mapper
@Mapper
public interface GoodsMapper {
    // âŒ ç¦æ­¢ï¼šMapper è¿”å› VO
    PageResult<GoodsRespVO> selectPageWithCategory(GoodsPageReqVO reqVO);
}
```

**âœ… æ­£ç¡®å†™æ³•ï¼ˆService å±‚å…³è”ï¼‰ï¼š**
```java
// Mapperï¼šåªè¿”å› DO
default PageResult<GoodsDO> selectPage(GoodsPageReqVO reqVO) {
    return selectPage(reqVO, new LambdaQueryWrapperX<GoodsDO>()
            .likeIfPresent(GoodsDO::getGoodsName, reqVO.getGoodsName())
            .orderByDesc(GoodsDO::getId));
}

// Serviceï¼šè´Ÿè´£å…³è”å’Œè½¬æ¢
public PageResult<GoodsRespVO> getGoodsPage(GoodsPageReqVO pageReqVO) {
    // 1. Mapper æŸ¥è¯¢ DO
    PageResult<GoodsDO> pageResult = goodsMapper.selectPage(pageReqVO);
    
    // 2. æå–å…³è”ID
    Set<Long> categoryIds = convertSet(pageResult.getList(), GoodsDO::getCategoryId);
    
    // 3. æ‰¹é‡æŸ¥è¯¢å…³è”æ•°æ®
    Map<Long, String> categoryMap = goodsCategoryService.getGoodsCategoryMap(categoryIds);
    
    // 4. è½¬æ¢ VO å¹¶å¡«å……å…³è”å­—æ®µ
    return GoodsConvert.INSTANCE.convertPage(pageResult, categoryMap);
}
```

### 5.3 æƒé™æ ‡è¯†é”™è¯¯

**âŒ é”™è¯¯å†™æ³•ï¼š**
```java
// åç«¯
@PreAuthorize("@ss.hasPermission('wms:goods-info:create')")

// å‰ç«¯
v-hasPermi="['wms:goods_info:create']"

// æ•°æ®åº“
permission = 'wms:goodsInfo:create'
```

**âœ… æ­£ç¡®å†™æ³•ï¼ˆç»Ÿä¸€æ ¼å¼ï¼‰ï¼š**
```java
// åç«¯
@PreAuthorize("@ss.hasPermission('wms:goods:create')")

// å‰ç«¯
v-hasPermi="['wms:goods:create']"

// æ•°æ®åº“
permission = 'wms:goods:create'
```

---

## å…­ã€æ ¸å¿ƒåŸåˆ™æ€»ç»“

### 6.1 å¿…é¡»éµå®ˆçš„è§„åˆ™ï¼ˆä¸å¯è¿åï¼‰

1. âœ… **å­—å…¸å­—æ®µå¿…é¡»ä½¿ç”¨ `TINYINT(4)` å’Œæ•´æ•°å€¼**
2. âœ… **Mapper åªèƒ½è¿”å› DOï¼Œä¸èƒ½è¿”å› VO**
3. âœ… **æ•°æ®å…³è”åœ¨ Service å±‚å®Œæˆï¼Œä¸åœ¨ Mapper å±‚**
4. âœ… **æƒé™æ ‡è¯†ç»Ÿä¸€æ ¼å¼ï¼š`wms:æ¨¡å—å:æ“ä½œ`**
5. âœ… **å‰ç«¯å­—å…¸å¿…é¡»ä½¿ç”¨ `getIntDictOptions`**
6. âœ… **æ‰€æœ‰ç±»ã€æ–¹æ³•ã€å‡½æ•°å¿…é¡»æ·»åŠ è¯¦ç»†æ³¨é‡Š**
7. âœ… **DO å¿…é¡»ç»§æ‰¿ BaseDO**
8. âœ… **è¡¨ç»“æ„å¿…é¡»åŒ…å«ï¼šcreatorã€create_timeã€updaterã€update_timeã€deleted**

### 6.2 æ¨èçš„æœ€ä½³å®è·µ

1. âœ… ä½¿ç”¨ MapStruct è¿›è¡Œå¯¹è±¡è½¬æ¢
2. âœ… ä½¿ç”¨ `LambdaQueryWrapperX` æ„å»ºæŸ¥è¯¢æ¡ä»¶
3. âœ… æ‰¹é‡å…³è”æŸ¥è¯¢ä½¿ç”¨ Map æ–¹å¼
4. âœ… åˆ é™¤æ“ä½œå‰è¿›è¡ŒäºŒæ¬¡ç¡®è®¤
5. âœ… è¡¨å•æäº¤å‰è¿›è¡Œæ•°æ®æ ¡éªŒ
6. âœ… é”™è¯¯æç¤ºä½¿ç”¨å›½é™…åŒ–
7. âœ… é•¿æ–‡æœ¬ä½¿ç”¨ `show-overflow-tooltip`
8. âœ… å®šæœŸæ‰§è¡Œ `mvn clean compile` æ£€æŸ¥ç¼–è¯‘é”™è¯¯

---

## ä¸ƒã€å¿«é€Ÿå‚è€ƒ

### 7.1 å¸¸ç”¨å‘½ä»¤

```bash
# åç«¯ç¼–è¯‘
mvn clean compile

# åç«¯å¯åŠ¨
mvn spring-boot:run

# å‰ç«¯å¯åŠ¨
cd laby-ui
npm run dev

# ç±»å‹æ£€æŸ¥
npm run type-check
```

### 7.2 å¸¸ç”¨æ³¨è§£

```java
// åç«¯
@RestController              // Controller ç±»
@RequestMapping("/wms/xxx")  // è·¯å¾„æ˜ å°„
@PreAuthorize("@ss.hasPermission('wms:xxx:xxx')") // æƒé™æ§åˆ¶
@Validated                   // å¯ç”¨å‚æ•°æ ¡éªŒ
@Valid                       // æ ¡éªŒå‚æ•°
@Resource                    // ä¾èµ–æ³¨å…¥

// å‰ç«¯
v-hasPermi="['wms:xxx:xxx']"  // æƒé™æ§åˆ¶
v-loading="loading"           // åŠ è½½çŠ¶æ€
@keyup.enter="handleQuery"    // å›è½¦æœç´¢
```

### 7.3 ç›®å½•ç»“æ„é€ŸæŸ¥

```
åç«¯ï¼šlaby-module-wms/src/main/java/com/laby/module/wms/
      â”œâ”€â”€ controller/admin/xxx/
      â”œâ”€â”€ dal/dataobject/xxx/ + dal/mysql/xxx/
      â”œâ”€â”€ service/xxx/
      â”œâ”€â”€ convert/xxx/
      â””â”€â”€ enums/

å‰ç«¯ï¼šlaby-ui/src/
      â”œâ”€â”€ api/wms/
      â””â”€â”€ views/wms/xxx/
```

---

**æœ€åæé†’ï¼šå¼€å‘æ—¶ä¸¥æ ¼éµå¾ªæœ¬è§„èŒƒï¼Œä»£ç é£æ ¼ç»Ÿä¸€ï¼Œæé«˜ä»£ç è´¨é‡å’Œå¯ç»´æŠ¤æ€§ï¼** ğŸ¯
